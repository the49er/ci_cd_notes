pipeline {
    agent any
    stages {
        stage('build') {
            steps {
                sh './gradlew release'
            }
        }

        stage('copy') {
                    steps {
                        sh 'chown -R root:jenkins /root/notes'
                        sh 'cp /var/lib/jenkins/workspace/noteApp/notesApp.jar /root/notes'
                    }
                }

        stage('deploy') {
            steps {
                sh 'java -jar /root/notes/notesApp.jar'
            }
        }
    }
}